(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f323396"],{"13cf":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all-tabs"},[a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"border-card",stretch:""},on:{"tab-click":t.handleClick},model:{value:t.tabValue,callback:function(e){t.tabValue=e},expression:"tabValue"}},[t._l(t.automobileCategorys,(function(e){return[a("el-tab-pane",{key:e.value,class:0==t.filterAutomobileStock.length?"tab-small":"tab-normal",attrs:{label:e.label,name:e.value}},[t._l(t.filterAutomobileStock,(function(e,o){return a("el-col",{key:e.name,class:o>=4&&t.getShow<3||o>=3&&t.getShow>=3?"col-padding-rest":"col-padding-first",attrs:{span:t.getShow<3?4:7,offset:o>0&&o%4!=0&&t.getShow<3?2:1}},[a("el-card",{attrs:{"body-style":{padding:"0px",width:"100%"},shadow:"hover"}},[e.image?a("img",{attrs:{src:e.image,alt:e.name,width:"100%"}}):t._e(),a("div",{staticClass:"card-content"},[a("span",{class:t.getShow<=2?"name-small":"name-mini"},[a("strong",[t._v(t._s(e.name))])]),a("br"),a("span",{class:t.getShow<=2?"stock-small":"stock-mini"},[t._v(" 库存量: "),a("strong",[t._v(t._s(e.inventory))]),t._v("辆 ")]),a("br"),a("div",{staticClass:"button-padding-top"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.getShow,expression:"getShow == 1"}],attrs:{type:"warning",icon:"el-icon-edit-outline",size:"small",round:"",plain:""},on:{click:function(a){return t.handleChange(e.name,e.inventory)}}},[t._v("库存变更")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=t.getShow,expression:"getShow != 1"}],attrs:{type:"warning",icon:"el-icon-edit-outline",size:t.getShow>=3?"mini":"small",title:"库存变更",circle:"",plain:""},on:{click:function(a){return t.handleChange(e.name,e.inventory)}}})],1)])])],1)})),0==t.filterAutomobileStock.length?a("div",{staticStyle:{color:"#909399"}},[a("span",[t._v("抱歉，暂无数据")])]):t._e()],2)]}))],2),a("el-dialog",{attrs:{title:"库存变更",visible:t.formVisible,"close-on-click-modal":!1,"custom-class":"brand-dialog-min-width",top:"28vh",width:"32%"},on:{"update:visible":function(e){t.formVisible=e},close:t.closeDialog}},[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"80px",rules:t.formRules}},[a("el-form-item",{staticClass:"row-padding-bottom",attrs:{label:"操作"}},[a("el-switch",{attrs:{"active-color":"#98FB98","inactive-color":"#FA8072","active-text":"增加","inactive-text":"减少",disabled:0==t.stockNumber},model:{value:t.formData.operation,callback:function(e){t.$set(t.formData,"operation",e)},expression:"formData.operation"}})],1),a("el-form-item",{staticClass:"row-padding-bottom",attrs:{label:"变更数量",prop:"number"}},[a("el-input",{attrs:{type:"age",autocomplete:"off"},model:{value:t.formData.number,callback:function(e){t.$set(t.formData,"number",t._n(e))},expression:"formData.number"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.changeSubmit(e)}}},[t._v("提交")]),a("el-button",{nativeOn:{click:function(e){return t.handleClose(e)}}},[t._v("取消")])],1)],1)],1)},n=[],r=(a("4de4"),a("b0c0"),a("4360")),i=a("bc3a"),l=a.n(i),s={name:"StockMng",store:r["a"],data:function(){var t=this,e=function(e,a,o){if(!t.formData.operation&&a>t.stockNumber)return o(new Error("减少量不能多于库存量"));o()};return{loading:!1,tabValue:"car",filterAutomobileStock:[],formVisible:!1,formData:{},changeObject:"",stockNumber:0,automobileCategorys:[{label:"轿车",value:"car"},{label:"SUV",value:"suv"},{label:"MPV",value:"mpv"},{label:"跑车",value:"sportscar"},{label:"皮卡",value:"pickup"},{label:"微面",value:"minivan"},{label:"微卡",value:"minitruck"},{label:"轻客",value:"lightbus"}],automobileStock:[],formRules:{number:[{required:!0,message:"请输入变更数量",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"请输入正整数",trigger:"blur"},{validator:e,trigger:"blur"}]}}},mounted:function(){this.loading=!0;var t=this;l.a.get("http://localhost:7300/mock/5ee3182c322a3759ecb9f07b/mei/stock").then((function(e){t.automobileStock=e.data,t.filterStock(),t.loading=!1})).catch((function(e){t.$message({message:"网络错误,请稍后再试",type:"error"}),t.loading=!1,console.log(e)}))},computed:{getShow:function(){return this.$store.state.isShow}},methods:{handleClick:function(t){this.tabValue=t.name,this.filterStock()},filterStock:function(){var t=this.tabValue,e=this.automobileStock.filter((function(e){return e.category===t}));this.filterAutomobileStock=e},handleChange:function(t,e){this.formVisible=!0,this.formData=0===e?{operation:!0,number:null}:{operation:!1,number:null},this.changeObject=t,this.stockNumber=e},changeSubmit:function(){var t=this;this.$refs.formData.validate((function(e){e&&t.$confirm("确认提交吗？","提示",{cancelButtonClass:"btn-custom-cancel"}).then((function(){var e=0;e=t.formData.operation?t.stockNumber+t.formData.number:t.stockNumber-t.formData.number;var a=t.automobileStock;for(var o in a)if(a[o].name===t.changeObject){a[o].inventory=e;break}t.filterStock(),t.$message({message:"变更成功",type:"success"}),t.$refs.formData.resetFields(),t.changeObject="",t.stockNumber=0,t.formVisible=!1})).catch((function(){}))}))},closeDialog:function(){this.changeObject="",this.stockNumber=0,this.$refs.formData.resetFields()},handleClose:function(){this.changeObject="",this.stockNumber=0,this.formVisible=!1,this.$refs.formData.resetFields()}}},c=s,u=(a("e52f"),a("2877")),f=Object(u["a"])(c,o,n,!1,null,null,null);e["default"]=f.exports},"1dde":function(t,e,a){var o=a("d039"),n=a("b622"),r=a("2d00"),i=n("species");t.exports=function(t){return r>=51||!o((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4de4":function(t,e,a){"use strict";var o=a("23e7"),n=a("b727").filter,r=a("1dde"),i=a("ae40"),l=r("filter"),s=i("filter");o({target:"Array",proto:!0,forced:!l||!s},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,e,a){var o=a("861d"),n=a("e8b5"),r=a("b622"),i=r("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?o(a)&&(a=a[i],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},ae40:function(t,e,a){var o=a("83ab"),n=a("d039"),r=a("5135"),i=Object.defineProperty,l={},s=function(t){throw t};t.exports=function(t,e){if(r(l,t))return l[t];e||(e={});var a=[][t],c=!!r(e,"ACCESSORS")&&e.ACCESSORS,u=r(e,0)?e[0]:s,f=r(e,1)?e[1]:void 0;return l[t]=!!a&&!n((function(){if(c&&!o)return!0;var t={length:-1};c?i(t,1,{enumerable:!0,get:s}):t[1]=1,a.call(t,u,f)}))}},b0c0:function(t,e,a){var o=a("83ab"),n=a("9bf2").f,r=Function.prototype,i=r.toString,l=/^\s*function ([^ (]*)/,s="name";o&&!(s in r)&&n(r,s,{configurable:!0,get:function(){try{return i.call(this).match(l)[1]}catch(t){return""}}})},b727:function(t,e,a){var o=a("0366"),n=a("44ad"),r=a("7b0b"),i=a("50c4"),l=a("65f0"),s=[].push,c=function(t){var e=1==t,a=2==t,c=3==t,u=4==t,f=6==t,m=5==t||f;return function(b,d,h,v){for(var g,p,k=r(b),w=n(k),S=o(d,h,3),y=i(w.length),C=0,D=v||l,x=e?D(b,y):a?D(b,0):void 0;y>C;C++)if((m||C in w)&&(g=w[C],p=S(g,C,k),t))if(e)x[C]=p;else if(p)switch(t){case 3:return!0;case 5:return g;case 6:return C;case 2:s.call(x,g)}else if(u)return!1;return f?-1:c||u?u:x}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},b98d:function(t,e,a){},e52f:function(t,e,a){"use strict";var o=a("b98d"),n=a.n(o);n.a},e8b5:function(t,e,a){var o=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==o(t)}}}]);
//# sourceMappingURL=chunk-2f323396.7e2b0692.js.map